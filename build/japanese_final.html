<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>일본어 학습 프로그램 V7 - 완성판</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f3f4f6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .app-container {
            max-width: 428px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
        }

        .header {
            background: white;
            padding: 12px 16px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 {
            font-size: 1.1rem;
            color: #7c3aed;
            font-weight: 600;
        }

        .menu-btn {
            background: #7c3aed;
            color: white;
            border: none;
            padding: 8px 14px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
        }

        .menu-dropdown {
            position: absolute;
            top: 100%;
            right: 16px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            z-index: 1000;
            display: none;
            min-width: 150px;
            margin-top: 8px;
            overflow: hidden;
        }

        .menu-dropdown.show {
            display: block;
        }

        .menu-item {
            padding: 14px 16px;
            cursor: pointer;
            border-bottom: 1px solid #f3f4f6;
            transition: background 0.2s;
            font-size: 14px;
        }

        .menu-item:hover {
            background: #faf5ff;
        }

        .menu-item.active {
            background: #7c3aed;
            color: white;
        }

        .main-content {
            padding: 16px;
            min-height: calc(100vh - 60px);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* 모드 선택 버튼 */
        .mode-selector {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            background: #f5f5f5;
            padding: 4px;
            border-radius: 12px;
        }

        .mode-btn {
            flex: 1;
            padding: 10px;
            border: none;
            background: transparent;
            color: #666;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .mode-btn.active {
            background: white;
            color: #7c3aed;
            box-shadow: 0 2px 8px rgba(124, 58, 237, 0.2);
        }

        /* 필터 드롭다운 */
        .filter-dropdown {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            font-size: 15px;
            background: white;
            cursor: pointer;
            margin-bottom: 16px;
        }

        /* 단어 리스트 */
        .interactive-vocab-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-height: calc(100vh - 250px);
            overflow-y: auto;
        }

        /* 단어 카드 */
        .interactive-word-card {
            display: grid;
            grid-template-columns: 1fr auto;
            align-items: center;
            background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
            color: white;
            padding: 20px;
            border-radius: 16px;
            min-height: 110px;
            gap: 12px;
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.2);
        }

        .word-column {
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 6px;
        }

        .japanese-word {
            font-size: 1.75rem;
            font-weight: 700;
            line-height: 1.3;
        }

        .japanese-word ruby rt {
            font-size: 0.55em;
            opacity: 0.9;
        }

        .word-meaning {
            font-size: 1.2rem;
            opacity: 0.9;
            color: #f0f8ff;
            font-weight: 500;
        }

        /* 액션 버튼 */
        .action-buttons {
            display: grid;
            grid-template-columns: 44px 44px;
            grid-template-rows: 38px 38px;
            gap: 4px;
        }

        .action-btn-small {
            border: 1.5px solid rgba(255, 255, 255, 0.4);
            background: rgba(255, 255, 255, 0.15);
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .action-btn-small:active {
            transform: scale(0.95);
        }

        .action-btn-small.active {
            background: white;
            color: #7c3aed;
        }

        .action-btn-small:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .btn-know {
            background: rgba(34, 197, 94, 0.25);
            border-color: rgba(34, 197, 94, 0.5);
        }

        .btn-dont-know {
            background: rgba(239, 68, 68, 0.25);
            border-color: rgba(239, 68, 68, 0.5);
        }

        .btn-dont-know.checked {
            background: #ef4444;
            border-color: #ef4444;
        }

        /* 아는 단어 그리드 */
        .known-words-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            max-height: calc(100vh - 250px);
            overflow-y: auto;
        }

        .known-word-card {
            background: linear-gradient(135deg, #22c55e 0%, #84cc16 100%);
            color: white;
            padding: 14px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(34, 197, 94, 0.2);
        }

        .action-btn {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
            color: white;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 16px;
        }

        .empty-message {
            text-align: center;
            padding: 48px 24px;
            color: #9ca3af;
            font-size: 1rem;
        }

        .hidden {
            display: none;
        }

        /* 스크롤바 숨기기 */
        ::-webkit-scrollbar {
            width: 0;
            display: none;
        }

        /* 퀴즈 스타일 */
        .quiz-category-selector {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 8px;
        }

        .quiz-cat-btn {
            padding: 10px 16px;
            border: 1px solid #e0e0e0;
            background: white;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s;
        }

        .quiz-cat-btn.active {
            background: #7c3aed;
            color: white;
            border-color: #7c3aed;
        }

        .quiz-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 32px 24px;
            margin-bottom: 24px;
            min-height: 250px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .quiz-question {
            color: white;
            font-size: 1.4rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 24px;
            line-height: 1.6;
        }

        .show-answer-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid white;
            color: white;
            padding: 12px 32px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .show-answer-btn:hover {
            background: white;
            color: #667eea;
        }

        .quiz-answer {
            color: #fff9c4;
            font-size: 1.1rem;
            text-align: center;
            margin-top: 20px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            line-height: 1.5;
        }

        .quiz-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 16px;
        }

        .quiz-control-btn {
            padding: 12px 24px;
            background: #7c3aed;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
        }

        .quiz-progress {
            font-size: 14px;
            color: #6b7280;
            font-weight: 600;
        }

        /* PC에서 보기 좋게 */
        @media (min-width: 768px) {
            body {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                padding: 20px;
            }
            
            .app-container {
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
                border-radius: 20px;
                overflow: hidden;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="header">
            <h1>일본어 학습 V7</h1>
            <button class="menu-btn" onclick="toggleMenu()">메뉴</button>
            <div class="menu-dropdown" id="menuDropdown">
                <div class="menu-item active" onclick="switchTab('vocabulary')">단어장</div>
                <div class="menu-item" onclick="switchTab('quiz')">퀴즈</div>
            </div>
        </div>

        <div class="main-content">
            <!-- 단어장 탭 -->
            <div id="vocabulary" class="tab-content active">
                <h2 style="font-size: 1.2rem; margin-bottom: 16px; color: #374151;">인터랙티브 단어장</h2>
                
                <div class="mode-selector">
                    <button class="mode-btn active" onclick="switchMode('study')">
                        학습 모드 (<span id="study-count">0</span>)
                    </button>
                    <button class="mode-btn" onclick="switchMode('known')">
                        아는 단어 (<span id="known-count">0</span>)
                    </button>
                </div>

                <div id="study-mode">
                    <select class="filter-dropdown" id="categoryFilter" onchange="filterCategory()">
                        <option value="all">전체 보기</option>
                        <option value="명사">명사</option>
                        <option value="동사">동사</option>
                        <option value="い형용사">い형용사</option>
                        <option value="な형용사">な형용사</option>
                        <option value="부사">부사</option>
                        <option value="숫자">숫자</option>
                    </select>

                    <div class="interactive-vocab-list" id="vocab-list"></div>
                </div>

                <div id="known-mode" class="hidden">
                    <button class="action-btn" onclick="restoreAll()">모든 단어 되돌리기</button>
                    <div class="known-words-grid" id="known-list"></div>
                </div>
            </div>

            <!-- 퀴즈 탭 -->
            <div id="quiz" class="tab-content">
                <h2 style="font-size: 1.2rem; margin-bottom: 16px; color: #374151;">의문문 연습</h2>
                
                <div class="quiz-category-selector">
                    <button class="quiz-cat-btn active" onclick="switchQuizCategory('basic')">기본 의문문</button>
                    <button class="quiz-cat-btn" onclick="switchQuizCategory('time')">시간 관련</button>
                    <button class="quiz-cat-btn" onclick="switchQuizCategory('location')">장소/이동</button>
                    <button class="quiz-cat-btn" onclick="switchQuizCategory('daily')">일상 대화</button>
                </div>

                <div class="quiz-content" id="quiz-content">
                    <div class="quiz-card" id="quiz-card">
                        <div class="quiz-question" id="quiz-question"></div>
                        <button class="show-answer-btn" onclick="toggleAnswer()">답 보기</button>
                        <div class="quiz-answer hidden" id="quiz-answer"></div>
                    </div>
                    <div class="quiz-controls">
                        <button class="quiz-control-btn" onclick="previousQuestion()">이전</button>
                        <span class="quiz-progress" id="quiz-progress">1 / 10</span>
                        <button class="quiz-control-btn" onclick="nextQuestion()">다음</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 단어 데이터
        const vocabularyData = {
            '명사': [
                { jp: 'これ', kr: '이것', furigana: null },
                { jp: 'それ', kr: '그것', furigana: null },
                { jp: '私', kr: '저/나', furigana: 'わたし' },
                { jp: '本', kr: '책', furigana: 'ほん' },
                { jp: '机', kr: '책상', furigana: 'つくえ' },
                { jp: '時計', kr: '시계', furigana: 'とけい' },
                { jp: '電車', kr: '전철', furigana: 'でんしゃ' },
                { jp: '学校', kr: '학교', furigana: 'がっこう' },
                { jp: '会社', kr: '회사', furigana: 'かいしゃ' },
                { jp: '家', kr: '집', furigana: 'いえ' },
                { jp: '料理', kr: '요리', furigana: 'りょうり' },
                { jp: '仕事', kr: '일, 직업', furigana: 'しごと' },
                { jp: '結婚', kr: '결혼', furigana: 'けっこん' },
                { jp: '恋愛', kr: '연애', furigana: 'れんあい' },
                { jp: '手紙', kr: '편지', furigana: 'てがみ' },
                { jp: 'お金', kr: '돈', furigana: 'おかね' },
                { jp: '映画', kr: '영화', furigana: 'えいが' },
                { jp: '音楽', kr: '음악', furigana: 'おんがく' },
                { jp: '日記', kr: '일기', furigana: 'にっき' },
                { jp: '話', kr: '이야기', furigana: 'はなし' },
                { jp: '夜中', kr: '한밤중', furigana: 'よなか' },
                { jp: 'バス', kr: '버스', furigana: null },
                { jp: 'タクシー', kr: '택시', furigana: null },
                { jp: '地下鉄', kr: '지하철', furigana: 'ちかてつ' },
                { jp: '自転車', kr: '자전거', furigana: 'じてんしゃ' },
                { jp: '飛行機', kr: '비행기', furigana: 'ひこうき' },
                { jp: '車', kr: '자동차', furigana: 'くるま' },
                { jp: '船', kr: '배', furigana: 'ふね' },
                { jp: '春', kr: '봄', furigana: 'はる' },
                { jp: '夏', kr: '여름', furigana: 'なつ' },
                { jp: '秋', kr: '가을', furigana: 'あき' },
                { jp: '冬', kr: '겨울', furigana: 'ふゆ' },
                { jp: '朝', kr: '아침', furigana: 'あさ' },
                { jp: '昼', kr: '낮', furigana: 'ひる' },
                { jp: '夜', kr: '저녁, 밤', furigana: 'よる' },
                { jp: '男', kr: '남자', furigana: 'おとこ' },
                { jp: '女', kr: '여자', furigana: 'おんな' },
                { jp: '犬', kr: '개', furigana: 'いぬ' },
                { jp: '猫', kr: '고양이', furigana: 'ねこ' },
                { jp: '人', kr: '사람', furigana: 'ひと' },
                { jp: '先生', kr: '선생님', furigana: 'せんせい' },
                { jp: '学生', kr: '학생', furigana: 'がくせい' },
                { jp: '会社員', kr: '회사원', furigana: 'かいしゃいん' },
                { jp: '医者', kr: '의사', furigana: 'いしゃ' },
                { jp: '歌手', kr: '가수', furigana: 'かしゅ' }
            ],
            '동사': [
                { jp: '食べる', kr: '먹다', furigana: 'たべる' },
                { jp: '飲む', kr: '마시다', furigana: 'のむ' },
                { jp: '見る', kr: '보다', furigana: 'みる' },
                { jp: '行く', kr: '가다', furigana: 'いく' },
                { jp: '来る', kr: '오다', furigana: 'くる' },
                { jp: '読む', kr: '읽다', furigana: 'よむ' },
                { jp: '書く', kr: '쓰다', furigana: 'かく' },
                { jp: '話す', kr: '말하다', furigana: 'はなす' },
                { jp: '聞く', kr: '듣다', furigana: 'きく' },
                { jp: '作る', kr: '만들다', furigana: 'つくる' },
                { jp: '乗る', kr: '타다', furigana: 'のる' },
                { jp: '買う', kr: '사다', furigana: 'かう' },
                { jp: '売る', kr: '팔다', furigana: 'うる' },
                { jp: '遊ぶ', kr: '놀다', furigana: 'あそぶ' },
                { jp: '降りる', kr: '내리다', furigana: 'おりる' },
                { jp: '寝る', kr: '자다', furigana: 'ねる' },
                { jp: '言う', kr: '말하다', furigana: 'いう' },
                { jp: '会う', kr: '만나다', furigana: 'あう' },
                { jp: 'する', kr: '하다', furigana: null },
                { jp: '勉強する', kr: '공부하다', furigana: 'べんきょうする' },
                { jp: '運転する', kr: '운전하다', furigana: 'うんてんする' }
            ],
            'い형용사': [
                { jp: '美味しい', kr: '맛있다', furigana: 'おいしい' },
                { jp: '楽しい', kr: '즐겁다', furigana: 'たのしい' },
                { jp: '新しい', kr: '새롭다', furigana: 'あたらしい' },
                { jp: '古い', kr: '오래되다', furigana: 'ふるい' },
                { jp: '高い', kr: '높다/비싸다', furigana: 'たかい' },
                { jp: '安い', kr: '싸다', furigana: 'やすい' },
                { jp: '痛い', kr: '아프다', furigana: 'いたい' },
                { jp: '面白い', kr: '재밌다', furigana: 'おもしろい' },
                { jp: '可愛い', kr: '귀엽다', furigana: 'かわいい' },
                { jp: 'かっこいい', kr: '멋있다', furigana: null },
                { jp: '寒い', kr: '촥다', furigana: 'さむい' },
                { jp: '暑い', kr: '덥다', furigana: 'あつい' },
                { jp: '忙しい', kr: '바쁘다', furigana: 'いそがしい' },
                { jp: '暖かい', kr: '따뜻하다', furigana: 'あたたかい' }
            ],
            'な형용사': [
                { jp: '好き', kr: '좋아하다', furigana: 'すき' },
                { jp: '嫌い', kr: '싫어하다', furigana: 'きらい' },
                { jp: '静か', kr: '조용하다', furigana: 'しずか' },
                { jp: '便利', kr: '편리하다', furigana: 'べんり' },
                { jp: '元気', kr: '건강하다', furigana: 'げんき' },
                { jp: '綺麗', kr: '아름답다', furigana: 'きれい' },
                { jp: '安全', kr: '안전하다', furigana: 'あんぜん' },
                { jp: '有名', kr: '유명하다', furigana: 'ゆうめい' },
                { jp: '大切', kr: '소중하다', furigana: 'たいせつ' },
                { jp: '簡単', kr: '간단하다', furigana: 'かんたん' }
            ],
            '부사': [
                { jp: 'とても', kr: '매우', furigana: null },
                { jp: 'ちょっと', kr: '조금', furigana: null },
                { jp: 'もう', kr: '벌써/이제', furigana: null },
                { jp: 'まだ', kr: '아직', furigana: null },
                { jp: 'よく', kr: '자주/잘', furigana: null },
                { jp: 'いつも', kr: '항상', furigana: null },
                { jp: 'ときどき', kr: '때때로', furigana: null },
                { jp: 'すぐ', kr: '공에', furigana: null },
                { jp: '必ず', kr: '꼭, 반드시', furigana: 'かならず' },
                { jp: 'とりあえず', kr: '일단', furigana: null }
            ],
            '숫자': [
                { jp: '一', kr: '1', furigana: 'いち' },
                { jp: '二', kr: '2', furigana: 'に' },
                { jp: '三', kr: '3', furigana: 'さん' },
                { jp: '四', kr: '4', furigana: 'よん/し' },
                { jp: '五', kr: '5', furigana: 'ご' },
                { jp: '六', kr: '6', furigana: 'ろく' },
                { jp: '七', kr: '7', furigana: 'なな/しち' },
                { jp: '八', kr: '8', furigana: 'はち' },
                { jp: '九', kr: '9', furigana: 'きゅう/く' },
                { jp: '十', kr: '10', furigana: 'じゅう' }
            ],
            '색깔': [
                { jp: '赤', kr: '빨강', furigana: 'あか' },
                { jp: '青', kr: '파랑', furigana: 'あお' },
                { jp: '黒', kr: '검정', furigana: 'くろ' },
                { jp: '白', kr: '하양', furigana: 'しろ' },
                { jp: '緑', kr: '녹색', furigana: 'みどり' },
                { jp: '紫', kr: '보라색', furigana: 'むらさき' },
                { jp: '黄色', kr: '노란색', furigana: 'きいろ' },
                { jp: '茶色', kr: '갈색', furigana: 'ちゃいろ' },
                { jp: 'ピンク', kr: '분홍색', furigana: null },
                { jp: '灰色', kr: '회색', furigana: 'はいいろ' }
            ],
            '과일': [
                { jp: 'りんご', kr: '사과', furigana: null },
                { jp: 'いちご', kr: '딸기', furigana: null },
                { jp: 'すいか', kr: '수박', furigana: null },
                { jp: 'ぶどう', kr: '포도', furigana: null },
                { jp: 'もも', kr: '복숭아', furigana: null },
                { jp: 'メロン', kr: '멜론', furigana: null },
                { jp: 'バナナ', kr: '바나나', furigana: null },
                { jp: 'みかん', kr: '귤', furigana: null },
                { jp: 'なし', kr: '배', furigana: null },
                { jp: 'かき', kr: '감', furigana: null }
            ],
            '음식': [
                { jp: 'えだまめ', kr: '자루콩', furigana: null },
                { jp: 'たこわさび', kr: '문어와사비', furigana: null },
                { jp: 'からあげ', kr: '치킨', furigana: null },
                { jp: 'やきとり', kr: '꼬치구이', furigana: null },
                { jp: '串かつ', kr: '꼬치튀김', furigana: 'くしかつ' },
                { jp: 'やきにく', kr: '야키니쿠', furigana: null },
                { jp: 'おつまみ', kr: '안주', furigana: null },
                { jp: '牛乳', kr: '우유', furigana: 'ぎゅうにゅう' },
                { jp: 'ミルク', kr: '밀크', furigana: null }
            ],
            '시간': [
                { jp: '一時', kr: '1시', furigana: 'いちじ' },
                { jp: '二時', kr: '2시', furigana: 'にじ' },
                { jp: '三時', kr: '3시', furigana: 'さんじ' },
                { jp: '四時', kr: '4시', furigana: 'よじ' },
                { jp: '五時', kr: '5시', furigana: 'ごじ' },
                { jp: '六時', kr: '6시', furigana: 'ろくじ' },
                { jp: '七時', kr: '7시', furigana: 'しちじ' },
                { jp: '八時', kr: '8시', furigana: 'はちじ' },
                { jp: '九時', kr: '9시', furigana: 'くじ' },
                { jp: '十時', kr: '10시', furigana: 'じゅうじ' },
                { jp: '十一時', kr: '11시', furigana: 'じゅういちじ' },
                { jp: '十二時', kr: '12시', furigana: 'じゅうにじ' },
                { jp: '今', kr: '지금', furigana: 'いま' },
                { jp: '明日', kr: '내일', furigana: 'あした' },
                { jp: '昨日', kr: '어제', furigana: 'きのう' },
                { jp: 'おととい', kr: '그제', furigana: null },
                { jp: '今日', kr: '오늘', furigana: 'きょう' }
            ],
            '월': [
                { jp: '一月', kr: '1월', furigana: 'いちがつ' },
                { jp: '二月', kr: '2월', furigana: 'にがつ' },
                { jp: '三月', kr: '3월', furigana: 'さんがつ' },
                { jp: '四月', kr: '4월', furigana: 'しがつ' },
                { jp: '五月', kr: '5월', furigana: 'ごがつ' },
                { jp: '六月', kr: '6월', furigana: 'ろくがつ' },
                { jp: '七月', kr: '7월', furigana: 'しちがつ' },
                { jp: '八月', kr: '8월', furigana: 'はちがつ' },
                { jp: '九月', kr: '9월', furigana: 'くがつ' },
                { jp: '十月', kr: '10월', furigana: 'じゅうがつ' },
                { jp: '十一月', kr: '11월', furigana: 'じゅういちがつ' },
                { jp: '十二月', kr: '12월', furigana: 'じゅうにがつ' }
            ],
            '요일': [
                { jp: '月曜日', kr: '월요일', furigana: 'げつようび' },
                { jp: '火曜日', kr: '화요일', furigana: 'かようび' },
                { jp: '水曜日', kr: '수요일', furigana: 'すいようび' },
                { jp: '木曜日', kr: '목요일', furigana: 'もくようび' },
                { jp: '金曜日', kr: '금요일', furigana: 'きんようび' },
                { jp: '土曜日', kr: '토요일', furigana: 'どようび' },
                { jp: '日曜日', kr: '일요일', furigana: 'にちようび' }
            ],
            '의문사': [
                { jp: 'なに', kr: '무엇', furigana: null },
                { jp: 'だれ', kr: '누구', furigana: null },
                { jp: 'どこ', kr: '어디', furigana: null },
                { jp: 'なんで', kr: '왜', furigana: null },
                { jp: 'いつ', kr: '언제', furigana: null },
                { jp: 'どう', kr: '어떻게', furigana: null },
                { jp: 'どのぐらい', kr: '얼마나', furigana: null },
                { jp: 'どの', kr: '어떤', furigana: null },
                { jp: 'どうして', kr: '왜', furigana: null }
            ]
        };

        let knownWords = JSON.parse(localStorage.getItem('knownWords') || '[]');
        let wordStates = {};
        let currentMode = 'study';
        let currentCategory = 'all';

        function toggleMenu() {
            const dropdown = document.getElementById('menuDropdown');
            dropdown.classList.toggle('show');
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(tab).classList.add('active');
            
            document.querySelectorAll('.menu-item').forEach(item => item.classList.remove('active'));
            event.target.classList.add('active');
            
            document.getElementById('menuDropdown').classList.remove('show');
        }

        function switchMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            if (mode === 'study') {
                document.getElementById('study-mode').classList.remove('hidden');
                document.getElementById('known-mode').classList.add('hidden');
                renderStudyWords();
            } else {
                document.getElementById('study-mode').classList.add('hidden');
                document.getElementById('known-mode').classList.remove('hidden');
                renderKnownWords();
            }
        }

        function filterCategory() {
            currentCategory = document.getElementById('categoryFilter').value;
            renderStudyWords();
        }

        function getAllWords() {
            let words = [];
            if (currentCategory === 'all') {
                Object.keys(vocabularyData).forEach(cat => {
                    vocabularyData[cat].forEach(word => {
                        words.push({ ...word, category: cat });
                    });
                });
            } else {
                vocabularyData[currentCategory]?.forEach(word => {
                    words.push({ ...word, category: currentCategory });
                });
            }
            return words;
        }

        function getStudyWords() {
            const allWords = getAllWords();
            return allWords.filter(word => 
                !knownWords.find(kw => kw.jp === word.jp && kw.kr === word.kr)
            );
        }

        function updateCounts() {
            document.getElementById('study-count').textContent = getStudyWords().length;
            document.getElementById('known-count').textContent = knownWords.length;
        }

        function toggleFurigana(wordId) {
            wordStates[wordId] = wordStates[wordId] || {};
            wordStates[wordId].showFurigana = !wordStates[wordId].showFurigana;
            renderStudyWords();
        }

        function toggleMeaning(wordId) {
            wordStates[wordId] = wordStates[wordId] || {};
            wordStates[wordId].showMeaning = !wordStates[wordId].showMeaning;
            renderStudyWords();
        }

        function markAsKnown(word) {
            knownWords.push(word);
            localStorage.setItem('knownWords', JSON.stringify(knownWords));
            renderStudyWords();
            updateCounts();
        }

        function markAsDontKnow(wordId) {
            wordStates[wordId] = wordStates[wordId] || {};
            wordStates[wordId].checked = true;
            renderStudyWords();
        }

        function restoreWord(word) {
            knownWords = knownWords.filter(kw => 
                !(kw.jp === word.jp && kw.kr === word.kr)
            );
            localStorage.setItem('knownWords', JSON.stringify(knownWords));
            renderKnownWords();
            updateCounts();
        }

        function restoreAll() {
            if (confirm('모든 아는 단어를 되돌리시겠습니까?')) {
                knownWords = [];
                wordStates = {};
                localStorage.setItem('knownWords', JSON.stringify(knownWords));
                renderKnownWords();
                renderStudyWords();
                updateCounts();
            }
        }

        function renderStudyWords() {
            const container = document.getElementById('vocab-list');
            const words = getStudyWords();
            
            if (words.length === 0) {
                container.innerHTML = '<div class="empty-message">모든 단어를 학습했습니다!</div>';
                return;
            }

            container.innerHTML = words.map((word, idx) => {
                const wordId = `${word.jp}_${idx}`;
                const state = wordStates[wordId] || {};
                const hasKanji = /[一-龯]/.test(word.jp);
                
                let japaneseHtml = word.jp;
                if (state.showFurigana && word.furigana && hasKanji) {
                    japaneseHtml = `<ruby>${word.jp}<rt>${word.furigana}</rt></ruby>`;
                }

                return `
                    <div class="interactive-word-card">
                        <div class="word-column">
                            <div class="japanese-word">${japaneseHtml}</div>
                            ${state.showMeaning ? `<div class="word-meaning">${word.kr}</div>` : ''}
                        </div>
                        <div class="action-buttons">
                            <button class="action-btn-small ${state.showFurigana ? 'active' : ''}" 
                                onclick="toggleFurigana('${wordId}')"
                                ${!hasKanji || !word.furigana ? 'disabled' : ''}>あ</button>
                            <button class="action-btn-small ${state.showMeaning ? 'active' : ''}" 
                                onclick="toggleMeaning('${wordId}')">뜻</button>
                            <button class="action-btn-small btn-know" 
                                onclick='markAsKnown(${JSON.stringify(word).replace(/'/g, "\\'")})'>안다</button>
                            <button class="action-btn-small btn-dont-know ${state.checked ? 'checked' : ''}" 
                                onclick="markAsDontKnow('${wordId}')">모른다</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderKnownWords() {
            const container = document.getElementById('known-list');
            
            if (knownWords.length === 0) {
                container.innerHTML = '<div class="empty-message">아직 학습한 단어가 없습니다.</div>';
                return;
            }

            container.innerHTML = knownWords.map(word => `
                <div class="known-word-card" onclick='restoreWord(${JSON.stringify(word).replace(/'/g, "\\'")})'>
                    <div style="font-size: 1.2rem; font-weight: bold; margin-bottom: 5px;">${word.jp}</div>
                    <div style="font-size: 0.9rem; opacity: 0.9;">${word.kr}</div>
                    <div style="font-size: 0.7rem; opacity: 0.7; margin-top: 5px;">탭하여 복원</div>
                </div>
            `).join('');
        }

        // 퀴즈 데이터
        const quizData = {
            'basic': [
                { q: 'これは なに？', a: '이것은 무엇인가요?' },
                { q: 'それは なんですか？', a: '그것은 무엇입니까?' },
                { q: 'だれですか？', a: '누구입니까?' },
                { q: 'どこですか？', a: '어디입니까?' },
                { q: 'いつですか？', a: '언제입니까?' },
                { q: 'どうですか？', a: '어떻습니까?' },
                { q: 'どうしてですか？', a: '왜요?' },
                { q: '好きな 色は なに？', a: '좋아하는 색은 무엇인가요?' },
                { q: '好きな くだものは なに？', a: '좋아하는 과일은 무엇인가요?' },
                { q: '韓国の たべものは 何が好き？', a: '한국 음식은 무엇이 좋아해요?' },
                { q: '本当ですか？', a: '진짜예요?' },
                { q: '大丈夫ですか？', a: '괜찮아요?' },
                { q: '誰が 言ったの？', a: '누가 말했어요?' },
                { q: 'いくらですか？', a: '얼마예요?' },
                { q: '何を したい？', a: '무엇을 하고 싶어요?' },
                { q: '何が ほしい？', a: '무엇을 갖고 싶어요?' }
            ],
            'time': [
                { q: '何時から？', a: '몇 시부터예요?' },
                { q: '何時まで？', a: '몇 시까지예요?' },
                { q: '何時から 何時まで？', a: '몇 시부터 몇 시까지예요?' },
                { q: '明日 仕事は 何時から？', a: '내일 일은 몇 시부터예요?' },
                { q: 'いつ 来るの？', a: '언제 와요?' },
                { q: 'いつまで いるの？', a: '언제까지 있어요?' },
                { q: 'いつでも いいよ', a: '언제든지 괜찮아요' },
                { q: '何月に 行くの？', a: '몇 월에 가요?' },
                { q: '何曜日が いい？', a: '무슨 요일이 좋아요?' },
                { q: '今日は 何曜日？', a: '오늘은 무슨 요일이에요?' },
                { q: '春になったら 何をしたい？', a: '봄이 되면 무엇을 하고 싶어요?' },
                { q: '朝ごはんは 何時に 食べる？', a: '아침밥은 몇 시에 먹어요?' },
                { q: '夜 何時に 寝る？', a: '밤 몇 시에 자요?' },
                { q: '一時間も かかる？', a: '한 시간이나 걸려요?' },
                { q: '一時間しか かからない？', a: '한 시간밖에 안 걸려요?' }
            ],
            'location': [
                { q: 'どこから どこまで どのぐらい かかるの？', a: '어디서 어디까지 얼마나 걸려요?' },
                { q: '家から 会社まで どのぐらい？', a: '집에서 회사까지 얼마나 걸려요?' },
                { q: 'バスで 行くの？', a: '버스로 가요?' },
                { q: '電車で 何分かかる？', a: '전철로 몇 분 걸려요?' },
                { q: '歩いて 行ける？', a: '걸어서 갈 수 있어요?' },
                { q: '会社は 家から 遠いの？', a: '회사는 집에서 멀어요?' },
                { q: '一番 近い コンビニは どこ？', a: '가장 가까운 편의점은 어디예요?' },
                { q: '飛行機で 何時間？', a: '비행기로 몇 시간이에요?' },
                { q: '地下鉄で カンナム駅まで 行ける？', a: '지하철로 강남역까지 갈 수 있어요?' },
                { q: 'どこで 降りるの？', a: '어디서 내려요?' },
                { q: 'どこに 乗るの？', a: '어디에 타요?' },
                { q: 'どこまで 歩くの？', a: '어디까지 걸어요?' },
                { q: 'どこから 来たの？', a: '어디서 왔어요?' },
                { q: 'どこへ 行きたい？', a: '어디로 가고 싶어요?' },
                { q: 'どこで 買える？', a: '어디서 살 수 있어요?' }
            ],
            'daily': [
                { q: '料理 できるの？', a: '요리 할 수 있어요?' },
                { q: 'いつでも 結婚できるね？', a: '언제든지 결혼할 수 있겠네요?' },
                { q: '彼氏 いないんだ？', a: '남친 없어요?' },
                { q: 'お金 もってる？', a: '돈 가지고 있어요?' },
                { q: '今から 飲みに 行く？', a: '지금부터 마시러 가요?' },
                { q: '二次会 どう？', a: '2차 어때요?' },
                { q: 'おかんじょう おねがいします', a: '계산 부탁합니다' },
                { q: 'メニュー ください', a: '메뉴 주세요' },
                { q: '何を 飲みますか？', a: '무엇을 마시겠습니까?' },
                { q: '何を 食べますか？', a: '무엇을 먹겠습니까?' },
                { q: '味は 大丈夫ですか？', a: '맛은 괜찮습니까?' },
                { q: '何が 食べたい？', a: '무엇을 먹고 싶어요?' },
                { q: 'おつまみ 欲しい？', a: '안주 원해요?' },
                { q: 'おかわり ください', a: '리필 주세요' },
                { q: 'どんな 食べ物が 好き？', a: '어떤 음식을 좋아해요?' }
            ]
        };

        let currentQuizCategory = 'basic';
        let currentQuestionIndex = 0;

        function switchQuizCategory(category) {
            currentQuizCategory = category;
            currentQuestionIndex = 0;
            document.querySelectorAll('.quiz-cat-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            loadQuestion();
        }

        function loadQuestion() {
            const questions = quizData[currentQuizCategory];
            const question = questions[currentQuestionIndex];
            
            document.getElementById('quiz-question').textContent = question.q;
            document.getElementById('quiz-answer').textContent = question.a;
            document.getElementById('quiz-answer').classList.add('hidden');
            document.getElementById('quiz-progress').textContent = 
                `${currentQuestionIndex + 1} / ${questions.length}`;
        }

        function toggleAnswer() {
            document.getElementById('quiz-answer').classList.toggle('hidden');
        }

        function nextQuestion() {
            const questions = quizData[currentQuizCategory];
            currentQuestionIndex = (currentQuestionIndex + 1) % questions.length;
            loadQuestion();
        }

        function previousQuestion() {
            const questions = quizData[currentQuizCategory];
            currentQuestionIndex = currentQuestionIndex === 0 ? 
                questions.length - 1 : currentQuestionIndex - 1;
            loadQuestion();
        }

        // 초기화
        updateCounts();
        renderStudyWords();
        loadQuestion();
    </script>
</body>
</html>